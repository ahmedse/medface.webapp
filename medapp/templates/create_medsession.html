{% extends 'core/base_generic.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container py-5">
    <h1 class="mb-5">Create Medsession</h1>
    <form method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
        {% csrf_token %}
        {% comment %} {{ form.year }}
        {{ form.year.errors }}  {% endcomment %}
        <div class="row">
            <div class="col">
                {{ form.year|as_crispy_field }}
            </div>
            <div class="col">
                {{ form.term|as_crispy_field }}
            </div>
        </div>

        <div class="row">
            <div class="col">
                {{ form.day|as_crispy_field }}
            </div>
            <div class="col">
                {{ form.room|as_crispy_field }}
            </div>
        </div>

        <div class="row">
            <div class="col">
                {{ form.course|as_crispy_field }}
            </div>
            <div class="col">
                {{ form.lecturer|as_crispy_field }}
            </div>
        </div>

        <!-- Loop through remaining form fields -->
        {% for field in form %}
            {% if field.name not in field_names %}
                {{ field|as_crispy_field }}
            {% endif %}
        {% endfor %}
        
        <!-- Image formset -->
        <h2>Images</h2>
        {{ formset.management_form }}
        {% for form in formset %}
          {{ form.as_p }}
          {% if form.errors %}
            {{ form.errors }}
          {% endif %}
        {% endfor %}
        
        <button type="submit" class="btn btn-primary">Save</button>
    </form>
</div>
{% endblock %}